{"version":3,"sources":["XMLNode.js"],"names":[],"mappings":"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","file":"XMLNode-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.9.1\n(function() {\n  var XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLElement, XMLNode, XMLRaw, XMLText, isEmpty, isFunction, isObject,\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('lodash/isObject');\n\n  isFunction = require('lodash/isFunction');\n\n  isEmpty = require('lodash/isEmpty');\n\n  XMLElement = null;\n\n  XMLCData = null;\n\n  XMLComment = null;\n\n  XMLDeclaration = null;\n\n  XMLDocType = null;\n\n  XMLRaw = null;\n\n  XMLText = null;\n\n  module.exports = XMLNode = (function() {\n    function XMLNode(parent) {\n      this.parent = parent;\n      this.options = this.parent.options;\n      this.stringify = this.parent.stringify;\n      if (XMLElement === null) {\n        XMLElement = require('./XMLElement');\n        XMLCData = require('./XMLCData');\n        XMLComment = require('./XMLComment');\n        XMLDeclaration = require('./XMLDeclaration');\n        XMLDocType = require('./XMLDocType');\n        XMLRaw = require('./XMLRaw');\n        XMLText = require('./XMLText');\n      }\n    }\n\n    XMLNode.prototype.element = function(name, attributes, text) {\n      var childNode, item, j, k, key, lastChild, len, len1, ref, val;\n      lastChild = null;\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = attributes.valueOf();\n      if (!isObject(attributes)) {\n        ref = [attributes, text], text = ref[0], attributes = ref[1];\n      }\n      if (name != null) {\n        name = name.valueOf();\n      }\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          item = name[j];\n          lastChild = this.element(item);\n        }\n      } else if (isFunction(name)) {\n        lastChild = this.element(name.apply());\n      } else if (isObject(name)) {\n        for (key in name) {\n          if (!hasProp.call(name, key)) continue;\n          val = name[key];\n          if (isFunction(val)) {\n            val = val.apply();\n          }\n          if ((isObject(val)) && (isEmpty(val))) {\n            val = null;\n          }\n          if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\n            lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\n          } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && key.indexOf(this.stringify.convertPIKey) === 0) {\n            lastChild = this.instruction(key.substr(this.stringify.convertPIKey.length), val);\n          } else if (!this.options.separateArrayItems && Array.isArray(val)) {\n            for (k = 0, len1 = val.length; k < len1; k++) {\n              item = val[k];\n              childNode = {};\n              childNode[key] = item;\n              lastChild = this.element(childNode);\n            }\n          } else if (isObject(val)) {\n            lastChild = this.element(key);\n            lastChild.element(val);\n          } else {\n            lastChild = this.element(key, val);\n          }\n        }\n      } else {\n        if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\n          lastChild = this.text(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\n          lastChild = this.cdata(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\n          lastChild = this.comment(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\n          lastChild = this.raw(text);\n        } else {\n          lastChild = this.node(name, attributes, text);\n        }\n      }\n      if (lastChild == null) {\n        throw new Error(\"Could not create any elements with: \" + name);\n      }\n      return lastChild;\n    };\n\n    XMLNode.prototype.insertBefore = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level\");\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.insertAfter = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level\");\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.remove = function() {\n      var i, ref;\n      if (this.isRoot) {\n        throw new Error(\"Cannot remove the root element\");\n      }\n      i = this.parent.children.indexOf(this);\n      [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref = [])), ref;\n      return this.parent;\n    };\n\n    XMLNode.prototype.node = function(name, attributes, text) {\n      var child, ref;\n      if (name != null) {\n        name = name.valueOf();\n      }\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = attributes.valueOf();\n      if (!isObject(attributes)) {\n        ref = [attributes, text], text = ref[0], attributes = ref[1];\n      }\n      child = new XMLElement(this, name, attributes);\n      if (text != null) {\n        child.text(text);\n      }\n      this.children.push(child);\n      return child;\n    };\n\n    XMLNode.prototype.text = function(value) {\n      var child;\n      child = new XMLText(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.cdata = function(value) {\n      var child;\n      child = new XMLCData(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.comment = function(value) {\n      var child;\n      child = new XMLComment(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.raw = function(value) {\n      var child;\n      child = new XMLRaw(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.declaration = function(version, encoding, standalone) {\n      var doc, xmldec;\n      doc = this.document();\n      xmldec = new XMLDeclaration(doc, version, encoding, standalone);\n      doc.xmldec = xmldec;\n      return doc.root();\n    };\n\n    XMLNode.prototype.doctype = function(pubID, sysID) {\n      var doc, doctype;\n      doc = this.document();\n      doctype = new XMLDocType(doc, pubID, sysID);\n      doc.doctype = doctype;\n      return doctype;\n    };\n\n    XMLNode.prototype.up = function() {\n      if (this.isRoot) {\n        throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\n      }\n      return this.parent;\n    };\n\n    XMLNode.prototype.root = function() {\n      var child;\n      if (this.isRoot) {\n        return this;\n      }\n      child = this.parent;\n      while (!child.isRoot) {\n        child = child.parent;\n      }\n      return child;\n    };\n\n    XMLNode.prototype.document = function() {\n      return this.root().documentObject;\n    };\n\n    XMLNode.prototype.end = function(options) {\n      return this.document().toString(options);\n    };\n\n    XMLNode.prototype.prev = function() {\n      var i;\n      if (this.isRoot) {\n        throw new Error(\"Root node has no siblings\");\n      }\n      i = this.parent.children.indexOf(this);\n      if (i < 1) {\n        throw new Error(\"Already at the first node\");\n      }\n      return this.parent.children[i - 1];\n    };\n\n    XMLNode.prototype.next = function() {\n      var i;\n      if (this.isRoot) {\n        throw new Error(\"Root node has no siblings\");\n      }\n      i = this.parent.children.indexOf(this);\n      if (i === -1 || i === this.parent.children.length - 1) {\n        throw new Error(\"Already at the last node\");\n      }\n      return this.parent.children[i + 1];\n    };\n\n    XMLNode.prototype.importXMLBuilder = function(xmlbuilder) {\n      var clonedRoot;\n      clonedRoot = xmlbuilder.root().clone();\n      clonedRoot.parent = this;\n      clonedRoot.isRoot = false;\n      this.children.push(clonedRoot);\n      return this;\n    };\n\n    XMLNode.prototype.ele = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.doc = function() {\n      return this.document();\n    };\n\n    XMLNode.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLNode.prototype.dtd = function(pubID, sysID) {\n      return this.doctype(pubID, sysID);\n    };\n\n    XMLNode.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLNode.prototype.u = function() {\n      return this.up();\n    };\n\n    return XMLNode;\n\n  })();\n\n}).call(this);\n"]}