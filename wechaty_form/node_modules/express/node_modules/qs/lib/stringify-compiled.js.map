{"version":3,"sources":["stringify.js"],"names":[],"mappings":"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","file":"stringify-compiled.js","sourcesContent":["'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching\n        return prefix + '[]';\n    },\n    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching\n        return prefix;\n    }\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaults = {\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar stringify = function stringify( // eslint-disable-line func-name-matching\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean' || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(stringify(\n                obj[key],\n                generateArrayPrefix(prefix, key),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        } else {\n            values = values.concat(stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts || {};\n\n    if (options.encoder !== null && options.encoder !== undefined && typeof options.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var delimiter = typeof options.delimiter === 'undefined' ? defaults.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : defaults.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : defaults.encode;\n    var encoder = typeof options.encoder === 'function' ? options.encoder : defaults.encoder;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var serializeDate = typeof options.serializeDate === 'function' ? options.serializeDate : defaults.serializeDate;\n    var encodeValuesOnly = typeof options.encodeValuesOnly === 'boolean' ? options.encodeValuesOnly : defaults.encodeValuesOnly;\n    if (typeof options.format === 'undefined') {\n        options.format = formats.default;\n    } else if (!Object.prototype.hasOwnProperty.call(formats.formatters, options.format)) {\n        throw new TypeError('Unknown format option provided.');\n    }\n    var formatter = formats.formatters[options.format];\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encode ? encoder : null,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly\n        ));\n    }\n\n    return keys.join(delimiter);\n};\n"]}